
set(COMMON_LINK_LIBRARIES glfw3 glad stb smartjson common)

add_definitions(-DTW_STATIC -DTW_NO_LIB_PRAGMA)

if (WIN32)
	set(COMMON_LINK_LIBRARIES ${COMMON_LINK_LIBRARIES} winmm imm32 version opengl32 shlwapi Ws2_32)
elseif (APPLE)
	set (CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -framework Cocoa -framework CoreVideo -framework IOKit -framework OpenGL -framework CoreFoundation")
endif ()

set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin)
listsubdir(SUB_DIRS ${CMAKE_CURRENT_LIST_DIR})

foreach(subdir ${SUB_DIRS})
	message(STATUS "subdirectory: " ${subdir})
	set(CURRENT_DIR_NAME ${subdir})

	set(SUB_PATH "${CMAKE_CURRENT_LIST_DIR}/${subdir}")

	# 自动生成title.h文件
	# set(TITLE_FILE "${SUB_PATH}/title.h")
	# file(WRITE ${TITLE_FILE} "//this file is auto generated by cmake\n#define APP_TITLE \"${CURRENT_DIR_NAME}\"\n")

	add_subdirectory(${subdir})
endforeach()
